# ── Prometheus Configuration ──────────────────────────────────────────────────
# Prometheus scrapes metrics from the LLM app and Jenkins every 15 seconds.

global:
  scrape_interval: 15s          # How often to pull metrics
  evaluation_interval: 15s      # How often to evaluate alert rules
  scrape_timeout: 10s

# ── Alert rules file ─────────────────────────────────────────────────────────
rule_files:
  - "alert_rules.yml"

# ── Scrape targets ───────────────────────────────────────────────────────────
scrape_configs:

  # 1. Prometheus itself
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]

  # 2. LLM Flask Application
  - job_name: "llm-app"
    metrics_path: "/metrics"
    static_configs:
      - targets: ["llm-app:5000"]
        labels:
          service: "llm-text-analysis"
          environment: "production"

  # 3. Jenkins (requires Prometheus plugin)
  - job_name: "jenkins"
    metrics_path: "/prometheus/"
    static_configs:
      - targets: ["jenkins:8080"]
        labels:
          service: "jenkins-ci"
